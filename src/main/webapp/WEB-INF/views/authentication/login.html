<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:include="masterlayout/masterpage :: headFragment">
    <title>Dashboard</title>
</head>
<body id="skin-blur-violate">

<header id="header" class="media" th:include="masterlayout/masterpage :: headerFragment"></header>

<div class="clearfix"></div>


<section id="login">
    <div th:if="${not #strings.isEmpty(message) and messageType == 'Success'}"
         class="col-lg-4 col-lg-offset-4 col-md-6 col-md-offset-3 col-sm-12 col-xs-12 centered">
        <div class="alert alert-success alert-icon alert-dismissable fade in">
            <i class="icon">&#61845;</i>
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <span th:text="${message}"></span>
        </div>
    </div>

    <div th:if="${not #strings.isEmpty(message) and messageType == 'Danger'}"
         class="col-lg-4 col-lg-offset-4 col-md-6 col-md-offset-3 col-sm-12 col-xs-12 centered">
        <div class="alert alert-danger alert-icon alert-dismissable fade in">
            <i class="icon">&#61730;</i>
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <span th:text="${message}"></span>
        </div>
    </div>
    <div class="clearfix"></div>
    <div class="col-lg-4 col-lg-offset-4 col-md-6 col-md-offset-3 col-sm-12 col-xs-12 centered">
        <!-- Login -->
        <form class="box tile animated active form-validation-1" id="box-login" name='loginForm'
              th:action="@{/login}"
              method='POST' role="form">
            <h2 class="m-t-0 m-b-15">Login</h2>

            <div class="form-group">
                <input type="text" class="login-control m-b-10 validate[required]" name="username"
                       placeholder="Username or Email Address"
                       autofocus="autofocus"/>
            </div>
            <div class="form-group">
                <input type="password" class="login-control validate[required,minSize[6]]" name="password"
                       placeholder="Password"/>
            </div>

            <small th:if="${not #strings.isEmpty(error)}" th:text="${error}" class="error"></small>
            <small th:if="${not #strings.isEmpty(msg)}" th:text="${msg}" class="error"></small>
            <div class="checkbox m-b-20">
                <label>
                    <input type="checkbox" name="remember-me"/>
                    Remember Me
                </label>
            </div>
            <input class="btn btn-sm m-r-5" value="Sign In" type="submit"/>

            <small>
                <!--<a class="box-switcher" data-switch="box-register" href="#box-register">Don't have an Account?</a> or-->
                <a class="box-switcher" data-switch="box-reset" href="#box-reset">Forgot Password?</a>
            </small>
            <input type="hidden"
                   th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        </form>

        <!-- Register -->
        <!--<form class="box animated tile" id="box-register">
            <h2 class="m-t-0 m-b-15">Register</h2>
            <input type="email" class="login-control m-b-10" placeholder="Email Address"/>
            <input type="text" class="login-control m-b-10" placeholder="Username"/>
            <input type="text" class="login-control m-b-10" placeholder="First Name"/>
            <input type="text" class="login-control m-b-10" placeholder="Last Name"/>
            <input type="password" class="login-control m-b-10" placeholder="Password"/>
            <input type="password" class="login-control m-b-20" placeholder="Confirm Password"/>

            <div class="checkbox m-b-20">
                <label>
                    <input type="checkbox"/>
                    I agree to the <a>Term of Services</a>
                </label>
            </div>

            <button class="btn btn-sm m-r-5">Register</button>

            <small><a class="box-switcher" data-switch="box-login" href="#box-login">Already have an Account?</a>
            </small>
        </form>-->

        <!-- Forgot Password -->
        <form class="box animated tile form-validation-1" id="box-reset" th:action="@{/user/sendResetPasswordLink}"
              method="post" role="form">
            <h2 class="m-t-0 m-b-15">Reset Password</h2>
            <p>Enter your email and we will send link password recovery to your mail box.</p>
            <div class="form-group">
                <input type="text" class="validate[required,custom[email]] login-control m-b-10" placeholder="Email Address"
                       name="user-email-reset"/>
            </div>
            <button class="btn btn-sm m-r-5">Reset Password</button>
            <small><a class="box-switcher" data-switch="box-login" href="#box-login">Already have an Account?</a>
            </small>
        </form>
    </div>
</section>

<!-- Javascript Libraries -->
<script th:inline="javascript">
    var CONTEXT_ROOT = /*[[@{/}]]*/ "";
</script>
<!-- jQuery -->
<script src="/resources/javascript/plugins/jquery.min.js" th:src="@{/resources/javascript/plugins/jquery.min.js}"></script>
<!-- jQuery Library -->

<!-- Bootstrap -->
<script src="/resources/javascript/plugins/bootstrap.min.js" th:src="@{/resources/javascript/plugins/bootstrap.min.js}"></script>
<!--  Form Related -->
<script src="/resources/javascript/validation/validate.min.js"
        th:src="@{/resources/javascript/validation/validate.min.js}"></script>
<!-- jQuery Form Validation Library -->
<script src="/resources/javascript/validation/validationEngine.min.js"
        th:src="@{/resources/javascript/validation/validationEngine.min.js}"></script>
<!-- jQuery Form Validation Library - requirred with above js -->

<!--  Form Related -->
<script src="/resources/javascript/plugins/icheck.js" th:src="@{/resources/javascript/plugins/icheck.js}"></script>
<!-- Custom Checkbox + Radio -->

<!-- All JS functions -->
<script src="/resources/javascript/plugins/functions.js" th:src="@{/resources/javascript/plugins/functions.js}"></script>
</body>

</html>