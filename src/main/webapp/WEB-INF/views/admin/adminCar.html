<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:include="masterlayout/masterpage :: headFragment">
    <title>Admin</title>
	
</head>

 
<body id="skin-blur-violate" th:attr="id=${session.userSkin}">

<!-- <header id="header" class="media" th:include="masterlayout/masterpage :: headerFragment"></header> -->

<div class="clearfix"></div>

<section id="main" class="p-relative" role="main">
    <!-- Side Menu -->
    <ul class="list-unstyled side-menu hidden-xs" th:include="common/sidebar/_sidemenu :: sidemenuFragment"/>

    <!-- Sidebar -->
    <aside id="sidebar" th:include="common/sidebar/_sidebar :: sidebarFragment"/>

    <!-- Content -->
    <section id="content" class="container">
        <h2 class="page-title" th:if="${type==1}">Xe tự lái</h2>
        <h2 class="page-title" th:if="${type==2}">Xe du lich</h2>
        <h2 class="page-title" th:if="${type==3}">Số tự động</h2>
        <h2 class="page-title" th:if="${type==4}">Xe cưới, dự án</h2>
        <h2 class="page-title" th:if="${type==5}">Nền slide</h2>
        <h2 class="page-title" th:if="${type==6}">Quảng cáo</h2>
        <h2 class="page-title" th:if="${type==7}">Xe yêu thích nhất</h2>
        

        <div class="block-area">
            <div class="filter-time">
                <!--<a href="addUser" id="createNewUser" class="btn">Create New User</a>-->

                <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#modalCreateUser" id="btn-create">
                    Create new Car
                </button>

            </div>
            <div th:if="${car != null}" class="modal" id="modalCreateUser" tabindex="-1" role="dialog"
                 aria-labelledby="exampleModalLabel">
                <form action="/admin/car/saveCar?${_csrf.parameterName}=${_csrf.token}" th:action="@{'/admin/car/saveCar?' + ${_csrf.parameterName} + '=' + ${_csrf.token}}" role="form" class="form-validation-1"
                      method="post" th:object="${car}" data-toggle="validator" id="createDialogForm" enctype="multipart/form-data">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="exampleModalLabel">Create New Car</h4>
                            </div>
                            <div class="modal-body">
                                <div class="form-group">
                                    <label for="eventTitle" class="control-label">Car title:</label>
                                    <input type="hidden" th:field="*{id}" id="idCar"/>
                                    <input type="text" class="form-control validate[required]" th:field="*{title}" id="titleCar" />
                                    
                                    <label for="shortDescription" class="control-label">Short description:</label>
                                    <textarea  class="form-control" th:field="*{shortDescription}" id="shortDescriptionCar" ></textarea>
                                    
                                    <label for="fullDescription" class="control-label">Full description</label>
                                    <textarea  class="form-control" th:field="*{fullDescription}" id="fullDescriptionCar" ></textarea>

									<label for="carTitle" class="control-label">Car title:</label>
                                    <select class="form-control" name="carType" id="carType" th:field="*{type}">
                                        <option value="1" th:if="${type==1}">Xe tự lái</option>
                                        <option value="2" th:if="${type==2}">Xe du lich</option>
                                        <option value="3" th:if="${type==3}">Xe số tự động</option>
                                        <option value="4" th:if="${type==4}">Xe cưới, dự án</option>
                                        <option value="5" th:if="${type==5}">Nền slide</option>
                                        <option value="6" th:if="${type==6}">Quảng cáo</option>
                                        <option value="7" th:if="${type==7}">Xe yêu thích nhất</option>
                                    </select>
                                    
                                    <label for="carImage" class="control-label">Car images:</label>
                                     <input type="file" name="file" />
                                     <input type="file" name="file" />
                                     <input type="file" name="file" />
                                     <input type="file" name="file" />
                                </div>

                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-primary btn-submit">Create Car</button>
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Dialog confirm when delete event -->
            <div  class="modal" id="modalDeleteUser" tabindex="-1" role="dialog"
                  aria-labelledby="exampleModalLabel">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title">Delete Confirm</h4>
                        </div>
                        <div class="modal-body">
                            <p>Are you sure to delete Car:&nbsp; <strong id="selectedUser" ></strong>&nbsp;? </p>
                        </div>
                        <div class="modal-footer">
                            <a class="btn btn-primary" id="idUserDelete" href="#">Delete Car</a>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End delete dialog -->
            
            <!-- Dialog confirm when delete image -->
            <div  class="modal" id="modalDeleteImage" tabindex="-1" role="dialog"
                  aria-labelledby="exampleModalLabel">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title">Delete Confirm</h4>
                        </div>
                        <div class="modal-body">
                            <p>Are you sure to delete this Image:&nbsp; <strong id="selectedUser" ></strong>&nbsp;? </p>
                        </div>
                        <div class="modal-footer">
                            <a class="btn btn-primary" id="idImageDelete" href="#">Delete Image</a>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End delete dialog -->
        </div>

        <hr class="whiter"/>
        <div class="block-area" id="tableStriped">
            <h3 class="block-title">List Car</h3>

            <div class="table-responsive overflow" tabindex="5005" style="overflow: hidden; outline: none;">
                <table class="tile table table-bordered table-hover table-responsive">
                    <thead>
                    <tr>
                        <th class="hidden"></th>
                        <th><input type="checkbox" class="checkbox"/></th>
                        <th width="10%">Title</th>
                        <th width="15%">Short description</th>
                        <th width="20%">Full description</th>
                        <th width="10%">type</th>
                        <th width="20%">images</th>
                        <th width="10%">Date</th>
                        <th width="10%">Content Control</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="car : ${cars}">
                        <td class="hidden"><input type="text" th:value="${car.id}" /></td>
                        <td ><input type="checkbox" class="checkbox"/></td>
                        <td  th:text="${car.title}" ></td>
                        <td  th:utext="${car.shortDescription}" ></td>
                        <td  th:utext="${car.fullDescription}" ></td>
                        <td class="hidden" th:text="${car.type}" ></td>
                        
                        <td th:if="${car.type == 1}" >Xe tu lai</td>
                        <td  th:if="${car.type == 2}" >Xe du lich</td>
                        <td  th:if="${car.type == 3}" >Xe so tu dong</td>
                        <td  th:if="${car.type == 4}" >Xe cuoi, du an</td>
                        
                        <td class="vertical-align-table" >
                        	<div th:each="image : ${car.images}">
                        		<img alt="" th:if="${image.image}" th:src="@{'/resources/images/cars/' + ${image.path}}" width="226" height="87" /><br />
                        		<video th:if="${!image.image}" width="226" height="87" controls="controls">
                        		<source th:src="@{'/resources/images/cars/' + ${image.path}}"  type="video/mp4" /></video><br />
	                            <a class="btn btn-alt btn-delete-image btn-sm" data-th-id="${image.id}"  data-toggle="modal" href="#modalDeleteImage" th:onclick="'confirmDeleteUser(' + @{'/admin/car/deleteImage/?' + ${image.id}} + ');'" ><i class="icon">
                                &#61918;</i> Delete file</a>
                        	</div>
                        </td>
                        
                        <td class="vertical-align-table ellipsis" th:text="${car.createDate}"></td>
                        <td><a class="btn btn-alt btn-edit btn-sm" data-toggle="modal" data-target="#modalCreateUser"><i class="icon">
                            &#61952;</i> Edit</a>
                            <a class="btn btn-alt btn-delete btn-sm" data-th-id="${car.id}" data-th-content="${car.title}" data-toggle="modal" href="#modalDeleteUser" th:onclick="'confirmDeleteUser(' + @{'/admin/car/deleteCar/?' + ${car.id}} + ');'" ><i class="icon">
                                &#61918;</i> Delete</a></td>
                    </tr>
<!--                     <tr th:if="${page.getTotalPages() > 1}">
                        <td colspan="7" class="noHover">
                            Pagging
                            <ul class="btn-group pull-right pagination">
                                <li ><a th:if="${!page.isFirstPage()}" th:href="@{'/admin/car/?index=' + ${page.getNumber() - 1}}">&laquo;</a></li>
                                <li th:each="pageNumber:${#numbers.sequence(0, page.getTotalPages() - 1)}"  >
                                    <a th:if="${page.getNumber() == pageNumber}" class="active"  th:text="${pageNumber+1}" th:href="@{'/admin/car/?index=' + ${pageNumber}}"></a>
                                    <a th:if="${page.getNumber() != pageNumber}" th:text="${pageNumber+1}" th:href="@{'/admin/car/?index=' + ${pageNumber}}"></a>
                                </li>
                                <li ><a th:if="${!page.isLastPage()}" th:href="@{'/admin/car/?index=' + ${page.getNumber() + 1}}">&raquo;</a></li>
                            </ul>
                            End Pagging
                        </td>
                    </tr> -->
                    </tbody>
                </table>
            </div>
        </div>
        <hr class="whiter"/>
    </section>

    <!-- Older IE Message -->
    <!--[if lt IE 9]>
    <div class="ie-block" th:include="dashboard/_ie9block :: ie9BlockFragment"/>
    <![endif]-->
</section>
<div th:include="masterlayout/masterpage :: pluginScriptLibraryFragment" ></div>
<script src="/resources/javascript/admin.js" th:src="@{/resources/javascript/adminCar.js}"></script>


<script type="text/javascript">
/* $(document).ready(
	function() {
		$('#fullDescriptionCar').redactor();
		$('#shortDescriptionCar').redactor();
	}
); */
</script>
</body>

</html>